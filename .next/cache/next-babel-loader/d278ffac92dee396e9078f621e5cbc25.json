{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar __jsx = React.createElement;\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from 'react'; // import { Link } from 'react-router-dom';\n\nimport axios from 'axios';\nimport Post from './Post';\nimport styles from './BlogSection.module.css';\n\nvar BlogSection = /*#__PURE__*/function (_Component) {\n  _inherits(BlogSection, _Component);\n\n  var _super = _createSuper(BlogSection);\n\n  function BlogSection() {\n    var _this;\n\n    _classCallCheck(this, BlogSection);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      posts: []\n    });\n\n    return _this;\n  }\n\n  _createClass(BlogSection, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var blogType = '';\n\n      if (this.props.type === 'studentCorner') {\n        blogType = 'story';\n      } else if (this.props.type === 'currentWorld') {\n        blogType = 'poem';\n      } else {\n        blogType = 'article';\n      }\n\n      axios.get('/api/blogs/' + blogType).then(function (res) {\n        console.log(res.data);\n\n        _this2.setState({\n          posts: res.data\n        });\n      })[\"catch\"](function (err) {\n        console.error(err);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var posts = this.state.posts.map(function (post) {\n        // post.date\n        var date = new Date(post.date_uploaded).toDateString();\n        return __jsx(Post, {\n          key: post._id,\n          id: post._id,\n          title: post.title,\n          author: post.author,\n          subtitle: post.subtitle,\n          content: post.content,\n          date: date,\n          image: post.location,\n          type: post.type\n        });\n      });\n      return __jsx(\"div\", {\n        className: styles.zigzag\n      }, posts);\n    }\n  }]);\n\n  return BlogSection;\n}(Component);\n\nexport function getServerSideProps() {\n  return _getServerSideProps.apply(this, arguments);\n}\n\nfunction _getServerSideProps() {\n  _getServerSideProps = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n    var res, data;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return fetch(\"https://.../data\");\n\n          case 2:\n            res = _context.sent;\n            _context.next = 5;\n            return res.json();\n\n          case 5:\n            data = _context.sent;\n            return _context.abrupt(\"return\", {\n              props: {\n                data: data\n              }\n            });\n\n          case 7:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _getServerSideProps.apply(this, arguments);\n}\n\nexport default BlogSection;","map":{"version":3,"sources":["/home/sauravskv/Desktop/TheNAA-Blog/components/Post/BlogSection.js"],"names":["React","Component","axios","Post","styles","BlogSection","posts","blogType","props","type","get","then","res","console","log","data","setState","err","error","state","map","post","date","Date","date_uploaded","toDateString","_id","title","author","subtitle","content","location","zigzag","getServerSideProps","fetch","json"],"mappings":";;;;;;;;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC,C,CACA;;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,IAAP,MAAiB,QAAjB;AACA,OAAOC,MAAP,MAAmB,0BAAnB;;IAEMC,W;;;;;;;;;;;;;;;;4DACM;AACJC,MAAAA,KAAK,EAAE;AADH,K;;;;;;;wCAIY;AAAA;;AAChB,UAAIC,QAAQ,GAAG,EAAf;;AAEA,UAAI,KAAKC,KAAL,CAAWC,IAAX,KAAoB,eAAxB,EAAyC;AACrCF,QAAAA,QAAQ,GAAG,OAAX;AACH,OAFD,MAGK,IAAI,KAAKC,KAAL,CAAWC,IAAX,KAAoB,cAAxB,EAAwC;AACzCF,QAAAA,QAAQ,GAAG,MAAX;AACH,OAFI,MAGA;AACDA,QAAAA,QAAQ,GAAG,SAAX;AACH;;AAEDL,MAAAA,KAAK,CAACQ,GAAN,CAAU,gBAAgBH,QAA1B,EACKI,IADL,CACU,UAAAC,GAAG,EAAI;AACTC,QAAAA,OAAO,CAACC,GAAR,CAAYF,GAAG,CAACG,IAAhB;;AACA,QAAA,MAAI,CAACC,QAAL,CAAc;AACVV,UAAAA,KAAK,EAAEM,GAAG,CAACG;AADD,SAAd;AAGH,OANL,WAOW,UAAAE,GAAG,EAAI;AACVJ,QAAAA,OAAO,CAACK,KAAR,CAAcD,GAAd;AACH,OATL;AAUH;;;6BACQ;AACL,UAAMX,KAAK,GAAG,KAAKa,KAAL,CAAWb,KAAX,CAAiBc,GAAjB,CAAqB,UAAAC,IAAI,EAAI;AACvC;AACA,YAAMC,IAAI,GAAG,IAAIC,IAAJ,CAASF,IAAI,CAACG,aAAd,EAA6BC,YAA7B,EAAb;AACA,eAAO,MAAC,IAAD;AAAM,UAAA,GAAG,EAAEJ,IAAI,CAACK,GAAhB;AAAqB,UAAA,EAAE,EAAEL,IAAI,CAACK,GAA9B;AAAmC,UAAA,KAAK,EAAEL,IAAI,CAACM,KAA/C;AAAsD,UAAA,MAAM,EAAEN,IAAI,CAACO,MAAnE;AAA2E,UAAA,QAAQ,EAAEP,IAAI,CAACQ,QAA1F;AAAoG,UAAA,OAAO,EAAER,IAAI,CAACS,OAAlH;AAA2H,UAAA,IAAI,EAAER,IAAjI;AAAuI,UAAA,KAAK,EAAED,IAAI,CAACU,QAAnJ;AAA6J,UAAA,IAAI,EAAEV,IAAI,CAACZ;AAAxK,UAAP;AACH,OAJa,CAAd;AAKA,aACI;AAAK,QAAA,SAAS,EAAEL,MAAM,CAAC4B;AAAvB,SACK1B,KADL,CADJ;AAKH;;;;EAxCqBL,S;;AA2C1B,gBAAsBgC,kBAAtB;AAAA;AAAA;;;iFAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAEaC,KAAK,oBAFlB;;AAAA;AAECtB,YAAAA,GAFD;AAAA;AAAA,mBAGcA,GAAG,CAACuB,IAAJ,EAHd;;AAAA;AAGCpB,YAAAA,IAHD;AAAA,6CAME;AAAEP,cAAAA,KAAK,EAAE;AAAEO,gBAAAA,IAAI,EAAJA;AAAF;AAAT,aANF;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;;;AASP,eAAeV,WAAf","sourcesContent":["import React, { Component } from 'react';\n// import { Link } from 'react-router-dom';\nimport axios from 'axios';\nimport Post from './Post';\nimport styles from './BlogSection.module.css'\n\nclass BlogSection extends Component {\n    state = {\n        posts: []\n    }\n\n    componentDidMount() {\n        let blogType = '';\n\n        if (this.props.type === 'studentCorner') {\n            blogType = 'story';\n        }\n        else if (this.props.type === 'currentWorld') {\n            blogType = 'poem';\n        }\n        else {\n            blogType = 'article';\n        }\n\n        axios.get('/api/blogs/' + blogType)\n            .then(res => {\n                console.log(res.data);\n                this.setState({\n                    posts: res.data\n                })\n            })\n            .catch(err => {\n                console.error(err);\n            })\n    }\n    render() {\n        const posts = this.state.posts.map(post => {\n            // post.date\n            const date = new Date(post.date_uploaded).toDateString();\n            return <Post key={post._id} id={post._id} title={post.title} author={post.author} subtitle={post.subtitle} content={post.content} date={date} image={post.location} type={post.type} />;\n        })\n        return (\n            <div className={styles.zigzag}>\n                {posts}\n            </div>\n        )\n    }\n}\n\nexport async function getServerSideProps() {\n  // Fetch data from external API\n  const res = await fetch(`https://.../data`)\n  const data = await res.json()\n\n  // Pass data to the page via props\n  return { props: { data } }\n}\n\nexport default BlogSection;"]},"metadata":{},"sourceType":"module"}